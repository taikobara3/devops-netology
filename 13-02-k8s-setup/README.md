# Домашнее задание к занятию «Установка Kubernetes»

### Цель задания

Установить кластер K8s.

### Чеклист готовности к домашнему заданию

1. Развёрнутые ВМ с ОС Ubuntu 20.04-lts.


### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. [Инструкция по установке kubeadm](https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/).
2. [Документация kubespray](https://kubespray.io/).

-----

### Задание 1. Установить кластер k8s с 1 master node

1. Подготовка работы кластера из 5 нод: 1 мастер и 4 рабочие ноды.
2. В качестве CRI — containerd.
3. Запуск etcd производить на мастере.
4. Способ установки выбрать самостоятельно.

Отключаем своп на всех узлах:

![13-02-01](./13-02-01.png)

Загружаем модули ядра, конфигурируем:

![13-02-02](./13-02-02.png)

![13-02-03](./13-02-03.png)

![13-02-04](./13-02-04.png)

Настраиваем containerd:

![13-02-05](./13-02-05.png)

Устанавливаем пакеты kubelet, kubeadm и kubectl:

![13-02-06](./13-02-06.png)

![13-02-07](./13-02-07.png)

![13-02-08](./13-02-08.png)

Инициализируем кластер:

![13-02-09](./13-02-09.png)

![13-02-10](./13-02-10.png)

![13-02-11](./13-02-11.png)

![13-02-12](./13-02-12.png)

Подключаем 4 рабочие ноды:

![13-02-13](./13-02-13.png)

![13-02-14](./13-02-14.png)

Устанавливаем Calico на мастер:

![13-02-15](./13-02-15.png)

Все узлы кластера находятся в рабочем состоянии:

![13-02-16](./13-02-16.png)